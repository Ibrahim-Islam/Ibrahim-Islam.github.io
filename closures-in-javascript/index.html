<!DOCTYPE html>
<html>

	<head>

		
		<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		
		<title>Closures in JavaScript</title>
		<meta name="description" content="" />
		
		<link rel="stylesheet" type="text/css" href="../assets/css/style.css" />
		<link rel="stylesheet" type="text/css" href="../assets/css/normalize.css" />

		<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,400,300,600,700,800|Exo+2:400,100,200,300,500,600,700,800' rel='stylesheet' type='text/css'>
		
		<meta name="HandheldFriendly" content="True" />
		<meta name="MobileOptimized" content="320" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link href="../assets/css/prism.css" rel="stylesheet"></link> 
		<meta name="generator" content="Ghost 0.5" />
<link rel="alternate" type="application/rss+xml" title="" href="../rss/index.html">
<link rel="canonical" href="http://my-ghost-blog.com/closures-in-javascript/" />

	</head>

	<body class="post-template tag-javascript">

		<div class="wrapper_pixel">

			

<div role='banner' class="header_pixel">

	<div class="menu_list">
		<a class="menu_item" href="http://bd.linkedin.com/in/mdibrahimislam/">LinkedIn</a>
		<a class="menu_item" href="http://stackoverflow.com/users/1565402/md-lbrahim">StackOverflow</a>
		<a class="menu_item" href="http://forums.asp.net/members/IbrahimIslam.aspx">ASP.NET</a>
		<a class="menu_item" href="https://github.com/Ibrahim-Islam">GitHub</a>
		<a class="menu_item" href="mailto:ibrahim.islam@live.com">Email</a>
	</div>

	<a class="" href="../index.html"><img class="cover_pixel" src="../content/images/2014/Aug/ACGTZvx.jpg" alt="" /></a>

	<h1 class="blogtitle_pixel">

		<a title="" href='http://my-ghost-blog.com'>

			

		</a>

	</h1>

	<p class="blogdescription_pixel">

		<a title="" href='http://my-ghost-blog.com'>

			C# | ASP.NET MVC | JavaScript |ORM | API

		</a>

	</p>

</div>

<main class="main_pixel post" role="main">

	
		
		<div id="trampezium"></div>

		<article class="article_pixel" role="article" itemscope itemtype="http://schema.org/Article" style="display:table;">
		
			<header class="postheader_pixel">

				<time class="date_pixel" datetime="2014-05-14" itemprop="datePublished">

					<span class="icon-clock"></span>Wednesday 14 May 2014

				</time>

				<h1 class="posttitle_pixel" itemprop="headline">

					Closures in JavaScript

				</h1>
				
			</header>

			<div class="postcontent_pixel" itemprop="articleBody">

				<p>A Closure in its simplest term is an <em>Inner Function</em> (function within a function) that has access to its variables and the Outer Function's variables. Closures (the inner function) will still have access to the outer function's variables even when the outer function returns. So, we can store the inner function in a variable and execute it later in time and still have access to the outer function's variables. <strong>Closure do not actually hold the outer function's variables instead it holds the references.</strong> So, if the outer function's variable's values changes so will values for the Closure when it executes.</p>

<p>The following is an example where Closure is used to demonstrate using Properties in Javascript e.g. making use of Private variable, getter and setter as Closures:</p>

<pre><code class=" language-javascript">function celebrityID() {  
    var celebrityID = 999;
    return {
        getID: function () {
            return celebrityID;
        },
        setID: function (theNewID) {
            celebrityID = theNewID;
        }
    };
}

var mjID = celebrityID();//Returns the object inside  
mjID.getID(); //999  
mjID.setID(567);  
alert(mjID.getID()); //567  
</code></pre>

<p>But the fact that outer function variables are stored as references in Closures also arises problems like in a for loop in Javascript with Closures depicted in the following code:</p>

<pre><code class=" language-javascript">function celebrityIDCreator(theCelebrities) {  
    var uniqueID = 100;
    for (i = 0; i &lt; theCelebrities.length; i++) {
        theCelebrities[i].id = function () {
            return uniqueID + i;
        };
    }
    return theCelebrities;
}

var actionCelebs = [{  
    name: "Stallone",
    id: 0
}, {
    name: "Cruise",
    id: 0
}, {
    name: "Willis",
    id: 0
}];

var createIdForActionCelebs = celebrityIDCreator(actionCelebs);  
var stalloneID = createIdForActionCelebs[0];  
alert(stalloneID.id());  
</code></pre>

<p>So, what we are trying to do in above code is to pass in an array of objects to a function where its property will be modified and then we get to output the modified property. In the <code>celebrityIDCreator()</code> function we are running a for loop and assigning a function to the array of objects passed and then returning the modified array. According to the logic we will expect the output alerted to be <em>100</em> but it will appear to be <em>103</em>. Because when the function in <code>id</code> is invoked it will execute exactly then and by then the for loop had executed and <code>i</code> had been modified and incremented to <em>3</em> so the returning value from the Closure would be <em>103</em>.</p>

<blockquote>
  <p>As a side note, Javascript is not <em>Block Scope</em> so the <code>i</code> counter initialized can be accessed from anywhere within the function and that is why it is <em>Function Scoped</em> instead.</p>
</blockquote>

<p>So, what can we do to achieve what we want to do above correctly? One option is to execute the <em>anonymous function</em> here (Closure) then and there inside the for loop as the counter progresses and return only the modified id instead of assigning a function which needs to be executed thus, not repeating the error again. To do that we code the following:</p>

<pre><code class=" language-javascript">function celebrityIDCreator(theCelebrities) {  
    var uniqueID = 100;
    for (i = 0; i &lt; theCelebrities.length; i++) {
        theCelebrities[i].id = function () {
            return uniqueID + i;
        }(); //'()' will execute the function then and there
    }
    return theCelebrities;
}

var actionCelebs = [{  
    name: "Stallone",
    id: 0
}, {
    name: "Cruise",
    id: 0
}, {
    name: "Willis",
    id: 0
}];

var createIdForActionCelebs = celebrityIDCreator(actionCelebs);

var stalloneID = createIdForActionCelebs[0];  
alert(stalloneID.id); // 100

var cruiseID = createIdForActionCelebs[1];  
alert(cruiseID.id); // 101

var willisID = createIdForActionCelebs[2];  
alert(willisID.id); // 102  
</code></pre>

<p>I scoured the net before understanding Closure. So, do not hate me if you have seen something here before :P</p>

			</div>

			
			
				<div class="posttags_pixel">

					<p><span class="icon-tag"></span> <a href="../tag/javascript/index.html">javascript</a></p>

				</div>

			

			

		</article>

    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'dev-ibrahim'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	

	

</main>

<footer class="footer_pixel">

	<p class="subscribe_pixel"><a class="icon-rss" target="_blank" href="../rss/index.html">

	</a></p>

	<div class="footertext_pixel">

		<p>All content copyright <a href="../index.html"></a> &copy; 2013 &bull; All rights reserved.</p>

	</div>

	<div class="footertext_pixel">

		<p>Proudly published with <a class="icon-ghost" href="http://tryghost.org" target="_blank">Ghost</a></p>
		<p>Theme: <a class="icon-github-circled" href="https://github.com/Skepton/Pixelpusher"></a></p>

	</div>

</footer>

		</div>

		<script src="../public/jquery.js"></script>
		<script src="../assets/js/prism.js"></script>
		<script src="../assets/js/fittext.js"></script>

		

		

		<script type="text/javascript">

			$(window).load(function(){

				if($('.postcontent_pixel p').eq(0).find('img').length){

					$('.postcontent_pixel p').eq(0).find('img').hide();

				}

			});

			$(document).ready(function(){

				if($('.postcontent_pixel p').eq(0).find('img').length){

					var source = $('.postcontent_pixel p').eq(0).find('img').attr('src');

					if($('.cover_pixel').length <= 0){

						$('.header_pixel').append('<img class="cover_pixel" src="http://127.0.0.1:2368/closures-in-javascript/'+source+'" alt="header">');

					}else{

						$('.cover_pixel').attr('src', source);

					}

					$('.postcontent_pixel p').eq(0).remove();

				}

				$('.blogdescription_pixel').remove();
				$('.blogtitle_pixel a').remove();

				$(".article_pixel img").load(function() {

					$(window).trigger('resize');
				  
				}).each(function() {

				  if(this.complete) $(this).load();

				});

				(function($) {
					// Responsive videos
					var all_videos = $( 'iframe[src^="http://player.vimeo.com"], iframe[src^="http://www.youtube.com"], iframe[src^="//www.youtube.com"], object, embed' );

					all_videos.each(function() {
						var el = $(this);

						el
							.attr( 'data-aspectRatio', el.height() / el.width() )
							.attr( 'data-oldWidth', el.attr( 'width' ) );
					} );
					
					$(window)
						.resize( function() {
							all_videos.each( function() {
								var el = $(this),
									newWidth = el.parents( '.postcontent_pixel' ).innerWidth(),
									oldWidth = el.attr( 'data-oldWidth' );
									el
										.removeAttr( 'height' )
										.removeAttr( 'width' )
										.width( newWidth )
								    		.height( newWidth * el.attr( 'data-aspectRatio' ) );
							} );
						} )
						.resize();
				})(jQuery);

				$(window).trigger('resize');

			});

			$(window).resize(function(){

				if($('.wrapper_pixel').height()<$(window).height()-$('.footer_pixel').height()){

					$('.footer_pixel').css('position','absolute');

				}else{$('.footer_pixel').css('position','relative');}

				$('.cover_pixel').on('load',function(){

					var header_height = $(this).height();
					var parent_height = $('.header_pixel').outerHeight();

					var height_complete = '-'+(header_height-parent_height)/2+'px';

					if((header_height-parent_height)/2 <= 0){height_complete = '0px';}

					$(this).css('margin-top',height_complete);

				}).each(function() {

					if(this.complete) $(this).load();

				});

				$('.postfooter_pixel address').css('height',$('.authorbio_pixel').outerHeight());
				$('.sharepost_pixel').css('height',$('.authorbio_pixel').outerHeight());

				jQuery(".postheader_pixel h1").fitText(1.1, { minFontSize: '40px', maxFontSize: '90px' });

			});

			$(window).scroll(function(){

				if($(this).scrollTop() > 50 && $(window).width() > 500 && $(window).height() > 500){
			
					jQuery(".blogtitle_pixel a").fitText(1.5, { minFontSize: '20px', maxFontSize: '32px' });

					$('.article_pixel').css('margin-top',$('.header_pixel').height()+230);

					$('.header_pixel').addClass('small');

					$('.article_pixel').css('margin-top',$('.header_pixel').height()+230);


				}else if($(this).scrollTop() <= 50){

					jQuery(".blogtitle_pixel a").fitText(1.2, { minFontSize: '20px', maxFontSize: '75px' });

					$('.article_pixel').css('margin-top',0);

					$('.header_pixel').removeClass('small');

				}

			});

		</script>

		

		<script type="text/javascript">

			$(document).ready(function(){

				$(window).trigger('resize');

				$(document).trigger('scroll');

				jQuery(".blogtitle_pixel a").fitText(1.2, { minFontSize: '20px', maxFontSize: '75px' });

			});

		</script>

	</body>
	

</html>